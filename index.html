<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Taya Navi</title>

<style>
:root{
  --bg:#0f1117;
  --card:#171a23;
  --text:#eaeef3;
  --border:#2a2f3c;
  --button:#202636;
  --primary:#2f5eff;
}

.light{
  --bg:#f4f6fb;
  --card:#ffffff;
  --text:#111;
  --border:#d0d6e2;
  --button:#e7ebf3;
  --primary:#2f5eff;
}

body{
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif;
  background:var(--bg);
  color:var(--text);
  margin:0;
  padding:30px;
  transition:.25s;
}
h1{margin:0 0 6px 0}
small{opacity:.7}
.container{max-width:1100px;margin:auto}
.card{
  background:var(--card);
  padding:20px;
  border-radius:14px;
  margin-bottom:20px;
}
textarea,input,select{
  width:100%;
  background:var(--bg);
  color:var(--text);
  border:1px solid var(--border);
  border-radius:10px;
  padding:10px;
  margin-top:6px;
  font-size:14px;
}
button{
  padding:10px 14px;
  border-radius:10px;
  border:1px solid var(--border);
  background:var(--button);
  color:var(--text);
  cursor:pointer;
  margin-right:10px;
}
button.primary{
  background:var(--primary);
  border:none;
  color:white;
}
.row{display:grid;grid-template-columns:1fr 1fr;gap:14px}
.status{margin-top:12px;font-size:13px}
.good{color:#4cd7a6}
.footer{
  margin-top:40px;
  text-align:center;
  font-size:12px;
  opacity:.4;
}
.topbar{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:20px;
}
.toggle{
  cursor:pointer;
  font-size:14px;
  opacity:.7;
}
</style>
</head>

<body>
<div class="container">

<div class="topbar">
<div>
<h1>Taya Navi v2.2</h1>
<small>Sales Navigator URL Engine</small>
</div>
<div class="toggle" onclick="toggleTheme()">ðŸŒ™ / â˜€</div>
</div>

<div class="card">
<label><b>Company Names</b></label>
<textarea id="companies" placeholder="Sunpower, Ricor Systems / Eatonãƒ»Cryomech"></textarea>

<label><b>Keywords (Optional)</b></label>
<textarea id="keywords" placeholder="è³¼è²·, Sales / å–¶æ¥­"></textarea>

<div class="row">
<div>
<label><b>Mode</b></label>
<select id="mode">
<option value="PAST">Former only (exclude current)</option>
<option value="CURRENT">Current only</option>
<option value="BOTH">Both (Current + Past)</option>
</select>
</div>

<div>
<label><b>Industry Template</b></label>
<select id="template">
<option value="generic">Generic</option>
<option value="ff">Fragrance & Flavor</option>
<option value="dc">Data Center</option>
<option value="chem">Chemicals</option>
<option value="energy">Energy</option>
</select>
</div>
</div>

<br>

<button class="primary" onclick="build()">Generate URL</button>
<button onclick="copyURL()">Copy URL</button>
<button onclick="openURL()">Open URL</button>

<div id="status" class="status"></div>
</div>

<div class="card">
<label><b>Generated URL</b></label>
<textarea id="output" readonly style="min-height:150px;"></textarea>

<label><b>Expanded Companies</b></label>
<textarea id="expanded" readonly style="min-height:120px;"></textarea>

<label><b>Formatted Keywords</b></label>
<textarea id="expandedKeywords" readonly style="min-height:80px;"></textarea>
</div>

<div class="footer">
Taya Navi v2.2 â€“ Keyword Engine Added â€“ 2026.02.20
</div>

</div>

<script>

const SPLIT_REGEX=/[\r\n,ï¼Œã€:ï¼šãƒ»\/\\;ï¼›]+/g;

const JP_SUFFIXES=["æ ªå¼ä¼šç¤¾","æœ‰é™ä¼šç¤¾","åˆåŒä¼šç¤¾","åˆè³‡ä¼šç¤¾","åˆåä¼šç¤¾","ï¼ˆæ ªï¼‰","ï¼ˆæœ‰ï¼‰","ãˆ±","ãˆ²"];

const EN_SUFFIX_PATTERNS=[
/\bco\.\s*ltd\.?$/i,
/\bltd\.?$/i,
/\blimited$/i,
/\binc\.?$/i,
/\bincorporated$/i,
/\bcorp\.?$/i,
/\bcorporation$/i,
/\bllc\.?$/i,
/\bplc\.?$/i,
/\bag$/i,
/\bgmbh$/i,
/\bs\.a\.?$/i,
/\bs\.p\.a\.?$/i,
/\bb\.v\.?$/i,
/\bn\.v\.?$/i,
/\bpty\.?\s*ltd\.?$/i,
/\bk\.k\.?$/i,
/\bkk$/i
];

function stripSuffix(name){
  let s=name.trim();
  JP_SUFFIXES.forEach(j=>{if(s.endsWith(j))s=s.replace(j,"").trim();});
  EN_SUFFIX_PATTERNS.forEach(re=>{s=s.replace(re,"").trim();});
  return s;
}

function uniq(arr){
  return [...new Set(arr.map(x=>x.trim()).filter(Boolean))];
}

function encodeCompany(name){
  return encodeURIComponent(name).replace(/%/g,"%25");
}

function formatKeywords(raw){
  if(!raw.trim()) return "";
  let list=uniq(raw.split(SPLIT_REGEX));
  let formatted=list.map(k=>{
    if(/[\u4e00-\u9fff]/.test(k)){
      return "â€œ"+k+"â€";
    }else{
      return "\""+k+"\"";
    }
  });
  return formatted.join(" OR ");
}

function encodeKeywords(str){
  return encodeURIComponent(str).replace(/%/g,"%25");
}

function build(){
  let companiesInput=document.getElementById("companies").value;
  let keywordInput=document.getElementById("keywords").value;
  let mode=document.getElementById("mode").value;

  let names=uniq(companiesInput.split(SPLIT_REGEX));
  let expanded=[];
  names.forEach(n=>{
    expanded.push(n);
    expanded.push(stripSuffix(n));
  });
  expanded=uniq(expanded);

  document.getElementById("expanded").value=expanded.join("\n");

  function values(list,type){
    return list.map(n=>`(text%3A${encodeCompany(n)}%2CselectionType%3A${type})`).join("%2C");
  }

  let filters="";
  if(mode==="PAST"){
    filters=`(type%3APAST_COMPANY%2Cvalues%3AList(${values(expanded,"INCLUDED")}))%2C(type%3ACURRENT_COMPANY%2Cvalues%3AList(${values(expanded,"EXCLUDED")}))`;
  }
  else if(mode==="CURRENT"){
    filters=`(type%3ACURRENT_COMPANY%2Cvalues%3AList(${values(expanded,"INCLUDED")}))`;
  }
  else{
    filters=`(type%3APAST_COMPANY%2Cvalues%3AList(${values(expanded,"INCLUDED")}))%2C(type%3ACURRENT_COMPANY%2Cvalues%3AList(${values(expanded,"INCLUDED")}))`;
  }

  let keywordBlock="";
  let formattedKeywords=formatKeywords(keywordInput);
  document.getElementById("expandedKeywords").value=formattedKeywords;

  if(formattedKeywords){
    keywordBlock=`%2Ckeywords%3A${encodeKeywords(formattedKeywords)}`;
  }

  let query=`(spellCorrectionEnabled%3Atrue%2CrecentSearchParam%3A(doLogHistory%3Atrue)%2Cfilters%3AList(${filters})${keywordBlock})`;

  let url=`https://www.linkedin.com/sales/search/people?query=${query}&viewAllFilters=true`;

  document.getElementById("output").value=url;
  document.getElementById("status").innerHTML="<span class='good'>URL Generated Successfully</span>";
}

function copyURL(){
  navigator.clipboard.writeText(document.getElementById("output").value);
}

function openURL(){
  window.open(document.getElementById("output").value,"_blank");
}

function toggleTheme(){
  document.body.classList.toggle("light");
}

</script>
</body>
</html>
